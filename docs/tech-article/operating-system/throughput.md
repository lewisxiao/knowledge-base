# 当我们讨论吞吐量时，我们实际关心的却是...
> 脱离实际业务的技术解决方案，都是耍流氓。

在开始之前，先来认识几个术语。

## TPS（Transaction Per Second）
TPS 即每秒事务数，注意不要将其理解为数据库中的事务，事务：客户端向服务器发送请求，然后服务器做出反应的过程，每个事务包含了3个过程：
  * 1. 向服务器发送请求
  * 2. 服务器处理请求
  * 3. 服务器将结果返回给客户端

如果服务器每秒能完成 n 次以上的3个过程，那么服务器的 TPS 就是 n。

## QPS（Query Per Second）
QPS 即每秒查询率，指服务器每秒能够响应的查询次数。是对一个特定的查询服务器在规定时间内所处理流量多少的衡量标准。需要注意 TPS 与 QPS 的区别：对于一个页面的一次访问，形成一个TPS。但一次页面请求，可能产生多次对服务器的请求，服务器对这些请求，就可计入QPS之中，即 1 QPS = 3 TPS。

一个系统的吞吐量（承压能力）与请求对CPU、内存等紧密相连。如果单个请求对CPU消耗越高，则IO影响速度越慢，系统吞吐能力越低，反之越高。

系统吞吐量几个重要参数：QPS（TPS）、并发数、响应时间
  * QPS（TPS）：每秒钟请求/事务 数量
  * 并发数：系统同时处理的request/事务数
  * 响应时间：一般取平均响应时间

三者之间的换算关系：QPS（TPS）= 并发数/平均响应时间 或者 并发数 = QPS*平均响应时间

在做系统设计时，比较关心的就是系统的吞吐量，我们经常说“系统需要支持最大2000个用户同时在线访问”，这就可以这么去理解：假设一个用户一秒钟内发起一个请求（1 并发 / 秒），即系统的峰值 QPS（TPS）需要达到 2000。

当然了，这是系统一个最大的峰值，为了不让系统满负荷运转，需要预留一定的空间，以达到最佳性能。

# 参考
1. [聊聊TPS、QPS、CPS概念和区别](https://cloud.tencent.com/developer/article/1859053)